{"version":3,"sources":["components/Settings.tsx","components/Header.tsx","logic/GeneticNode.ts","components/node/Node.tsx","components/GeneticVisualizer.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["PopulationSize","MutationType","getDefaultSettings","endColor","populationSize","Medium","mutationType","Gradual","mutationChance","decreaseMutation","matingPoolPercent","Settings","state","handleVisualize","_","props","switchToVisualize","handleMutationTypeChange","e","currentTarget","value","Invert","setState","handlePopulationSizeChange","Small","Large","handleColorChange","hexToRgb","handleCheckBoxChange","checked","handleMutationChanceChange","handleMatingPoolPercentChange","hex","result","exec","parseInt","className","Card","Header","as","Body","Form","Group","controlId","Label","style","fontWeight","Control","type","onChange","this","defaultValue","Check","label","min","max","step","Button","variant","onClick","React","Component","Navbar","bg","expand","Brand","Toggle","aria-controls","Collapse","id","Nav","Text","generationNumber","inline","sortByFitness","nextGeneration","switchToSettings","GeneticNode","colorVector","targetColor","difference","i","Math","sqrt","reduce","item","pow","mutate","x","getRandomInt","mutation","getMutationChance","random","ceil","floor","parent1","parent2","offspring","parent1Influence","flattenedNodes","slice","round","length","sort","a","b","getDistanceFromTarget","Node","color","geneticNode","height","width","backgroundColor","GeneticVisualizer","grid","settings","times","getFlattenedNodes","matingPool","getMatingPool","numCrossovers","getNextPopulation","unFlattenNodes","getInitialGrid","size","row","currentRow","col","push","nextPopulation","Array","from","parents","getParents","crossover","mutateGradual","mutateInvert","index1","index2","geneticNodes","j","Container","fluid","map","rowIdx","Row","key","node","nodeIdx","Col","nodes","index","App","isSettings","settingsState","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.ffe6ee06.chunk.js","sourcesContent":["import React from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport Card from \"react-bootstrap/Card\";\n\nexport interface SettingsState {\n  endColor: [number, number, number];\n  populationSize: PopulationSize;\n  mutationType: MutationType;\n  mutationChance: number;\n  decreaseMutation: boolean;\n  matingPoolPercent: number;\n}\n\ntype SettingsProps = {\n  switchToVisualize: Function;\n};\n\nexport enum PopulationSize {\n  Small,\n  Medium,\n  Large,\n}\n\nexport enum MutationType {\n  Gradual,\n  Invert,\n}\n\nexport function getDefaultSettings(): SettingsState {\n  return {\n    endColor: [0, 0, 0],\n    populationSize: PopulationSize.Medium,\n    mutationType: MutationType.Gradual,\n    mutationChance: 0.3,\n    decreaseMutation: false,\n    matingPoolPercent: 0.25,\n  };\n}\n\nexport default class Settings extends React.Component<\n  SettingsProps,\n  SettingsState\n> {\n  state: SettingsState = getDefaultSettings();\n\n  private handleVisualize = (_: React.FormEvent) => {\n    this.props.switchToVisualize(this.state);\n  };\n\n  private handleMutationTypeChange = (\n    e: React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    let mutationType = MutationType.Gradual;\n    switch (e.currentTarget.value) {\n      case \"Gradual\": {\n        mutationType = MutationType.Gradual;\n        break;\n      }\n      case \"Invert\": {\n        mutationType = MutationType.Invert;\n        break;\n      }\n    }\n    this.setState({\n      mutationType: mutationType,\n    });\n  };\n\n  private handlePopulationSizeChange = (\n    e: React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    let populationSize = PopulationSize.Medium;\n    switch (e.currentTarget.value) {\n      case \"Small\": {\n        populationSize = PopulationSize.Small;\n        break;\n      }\n      case \"Medium\": {\n        populationSize = PopulationSize.Medium;\n        break;\n      }\n      case \"Large\": {\n        populationSize = PopulationSize.Large;\n        break;\n      }\n    }\n    this.setState({\n      populationSize: populationSize,\n    });\n  };\n\n  private handleColorChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\n    this.setState({ endColor: this.hexToRgb(e.currentTarget.value) });\n  };\n\n  private handleCheckBoxChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    this.setState({ decreaseMutation: e.currentTarget.checked });\n  };\n\n  private handleMutationChanceChange = (\n    e: React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    this.setState({\n      mutationChance: +e.currentTarget.value,\n    });\n  };\n\n  private handleMatingPoolPercentChange = (\n    e: React.ChangeEvent<HTMLSelectElement>\n  ) => {\n    this.setState({\n      matingPoolPercent: +e.currentTarget.value,\n    });\n  };\n\n  private hexToRgb(hex: string): [number, number, number] {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return [\n      parseInt(result![1], 16),\n      parseInt(result![2], 16),\n      parseInt(result![3], 16),\n    ];\n  }\n\n  render() {\n    return (\n      <div className=\"container\">\n        <Card>\n          <Card.Header as=\"h5\">Genetic Visualizer</Card.Header>\n          <Card.Body>\n            <Form>\n              <Form.Group controlId=\"formEndColor\">\n                <Form.Label style={{ fontWeight: \"bold\" }}>\n                  The color to converge to:\n                </Form.Label>\n                <Form.Control type=\"color\" onChange={this.handleColorChange} />\n              </Form.Group>\n              <Form.Group controlId=\"formPopulationSize\">\n                <Form.Label style={{ fontWeight: \"bold\" }}>\n                  Population Size:\n                </Form.Label>\n                <Form.Control\n                  as=\"select\"\n                  defaultValue=\"Medium\"\n                  onChange={this.handlePopulationSizeChange}\n                >\n                  <option>Small</option>\n                  <option>Medium</option>\n                  <option>Large</option>\n                </Form.Control>\n              </Form.Group>\n              <Form.Group controlId=\"formMutationType\">\n                <Form.Label style={{ fontWeight: \"bold\" }}>\n                  Mutation Type:\n                </Form.Label>\n                <Form.Control\n                  as=\"select\"\n                  defaultValue=\"Gradual\"\n                  onChange={this.handleMutationTypeChange}\n                >\n                  <option>Gradual</option>\n                  <option>Invert</option>\n                </Form.Control>\n              </Form.Group>\n              <Form.Group controlId=\"formCheck\">\n                <Form.Check\n                  type=\"checkbox\"\n                  label=\"Decrease mutation chance over generations\"\n                  onChange={this.handleCheckBoxChange}\n                  checked={this.state.decreaseMutation}\n                />\n              </Form.Group>\n              <Form.Group controlId=\"formMutationRange\">\n                <Form.Label>\n                  <span style={{ fontWeight: \"bold\" }}>Mutation Chance:</span>{\" \"}\n                  {this.state.mutationChance}\n                </Form.Label>\n                <Form.Control\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.05\"\n                  value={this.state.mutationChance}\n                  onChange={this.handleMutationChanceChange}\n                />\n              </Form.Group>\n              <Form.Group controlId=\"formMatingPoolRange\">\n                <Form.Label>\n                  <span style={{ fontWeight: \"bold\" }}>\n                    Percentage of popluation in mating pool:\n                  </span>{\" \"}\n                  {this.state.matingPoolPercent}\n                </Form.Label>\n                <Form.Control\n                  type=\"range\"\n                  min=\"0\"\n                  max=\"1\"\n                  step=\"0.05\"\n                  value={this.state.matingPoolPercent}\n                  onChange={this.handleMatingPoolPercentChange}\n                />\n              </Form.Group>\n              <Button variant=\"primary\" onClick={this.handleVisualize}>\n                Visualize\n              </Button>\n            </Form>\n          </Card.Body>\n        </Card>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Navbar from \"react-bootstrap/Navbar\";\nimport Nav from \"react-bootstrap/Nav\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\n\ntype HeaderProps = {\n  generationNumber: number;\n  mutationChance: number;\n  nextGeneration: Function;\n  sortByFitness: Function;\n  switchToSettings: Function;\n};\n\nexport default class Header extends React.Component<HeaderProps> {\n  render() {\n    return (\n      <Navbar bg=\"light\" expand=\"lg\">\n        <Navbar.Brand>Genetic Visualizer</Navbar.Brand>\n        <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n        <Navbar.Collapse id=\"basic-navbar-nav\">\n          <Nav className=\"mr-auto\">\n            <Navbar.Text className=\"mr-sm-2\">\n              Generation Number: {this.props.generationNumber}\n            </Navbar.Text>\n            <Navbar.Text className=\"mr-sm-2\">\n              Mutation Chance: {this.props.mutationChance}\n            </Navbar.Text>\n          </Nav>\n          <Form inline>\n            <Button\n              className=\"mr-sm-2\"\n              onClick={(_) => this.props.sortByFitness()}\n            >\n              Sort by fitness\n            </Button>\n            <Button\n              className=\"mr-sm-2\"\n              onClick={(_) => this.props.nextGeneration()}\n            >\n              Next Generation\n            </Button>\n            <Button\n              className=\"mr-sm-2\"\n              onClick={(_) => this.props.nextGeneration(10)}\n            >\n              Next Generation (x10)\n            </Button>\n            <Button\n              className=\"mr-sm-2\"\n              variant=\"dark\"\n              onClick={(_) => this.props.switchToSettings()}\n            >\n              Reset\n            </Button>\n          </Form>\n        </Navbar.Collapse>\n      </Navbar>\n    );\n  }\n}\n","export default class GeneticNode {\n  colorVector: [number, number, number];\n  constructor() {\n    // Initialize to white.\n    this.colorVector = [255, 255, 255];\n  }\n\n  /**\n   * Offspring's colorVector determined by linear interpolation between both\n   * parents' color vectors. This is done for each color channel.\n   */\n  static crossover(parent1: GeneticNode, parent2: GeneticNode): GeneticNode {\n    let offspring = new GeneticNode();\n    for (let i = 0; i < 3; i++) {\n      let parent1Influence = Math.random();\n      offspring.colorVector[i] =\n        parent1.colorVector[i] * parent1Influence +\n        parent2.colorVector[i] * (1 - parent1Influence);\n    }\n    return offspring;\n  }\n\n  static getMatingPool(\n    flattenedNodes: GeneticNode[],\n    targetColor: [number, number, number],\n    matingPoolPercent: number\n  ): GeneticNode[] {\n    this.sortByFitness(flattenedNodes, targetColor);\n    return flattenedNodes.slice(\n      0,\n      Math.round(flattenedNodes.length * matingPoolPercent)\n    );\n  }\n\n  static sortByFitness(\n    flattenedNodes: GeneticNode[],\n    targetColor: [number, number, number]\n  ) {\n    flattenedNodes.sort((a, b) =>\n      a.getDistanceFromTarget(targetColor) <\n      b.getDistanceFromTarget(targetColor)\n        ? -1\n        : 1\n    );\n  }\n\n  // Used as the fitness in this case, smaller number -> more fit.\n  getDistanceFromTarget(targetColor: [number, number, number]): number {\n    let difference = [0, 0, 0];\n    for (let i = 0; i < 3; i++) {\n      difference[i] = targetColor[i] - this.colorVector[i];\n    }\n    return Math.sqrt(\n      difference.reduce((result, item) => {\n        return result + Math.pow(item, 2);\n      }, 0)\n    );\n  }\n\n  mutateGradual(generationNumber: number, mutationChance: number): number {\n    return this.mutate(\n      generationNumber,\n      mutationChance,\n      (x: number) => x + this.getRandomInt(-50, 50)\n    );\n  }\n\n  mutateInvert(generationNumber: number, mutationChance: number): number {\n    return this.mutate(\n      generationNumber,\n      mutationChance,\n      (x: number) => 255 - x\n    );\n  }\n\n  private mutate(\n    generationNumber: number,\n    mutationChance: number,\n    mutation: Function\n  ): number {\n    mutationChance = this.getMutationChance(mutationChance, generationNumber);\n    for (let i = 0; i < 3; i++) {\n      let value = Math.random();\n      if (value <= mutationChance) {\n        //this.colorVector[i] = 255 - this.colorVector[i];\n        this.colorVector[i] = mutation(this.colorVector[i]);\n        if (this.colorVector[i] > 255) {\n          this.colorVector[i] = 255;\n        } else if (this.colorVector[i] < 0) {\n          this.colorVector[i] = 0;\n        }\n      }\n    }\n    return mutationChance;\n  }\n\n  private getRandomInt(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n\n  /*\n   * As the generation number goes up the mutation chance should be decreased.\n   */\n  getMutationChance(mutationChance: number, generationNumber: number) {\n    if (generationNumber !== -1) {\n      return mutationChance / generationNumber;\n    }\n    return mutationChance;\n  }\n}\n","import React from \"react\";\nimport \"./Node.css\";\nimport GeneticNode from \"../../logic/GeneticNode\";\nimport { PopulationSize } from \"../Settings\";\n\ntype NodeProps = {\n  geneticNode: GeneticNode;\n  populationSize: PopulationSize;\n};\n\nexport default class Node extends React.Component<NodeProps> {\n  render() {\n    const color = this.props.geneticNode.colorVector;\n    let height = \"50px\";\n    let width = \"50px\";\n    switch (this.props.populationSize) {\n      case PopulationSize.Small: {\n        height = \"100px\";\n        width = \"100px\";\n        break;\n      }\n      case PopulationSize.Medium: {\n        height = \"50px\";\n        width = \"50px\";\n        break;\n      }\n      case PopulationSize.Large: {\n        height = \"15px\";\n        width = \"15px\";\n        break;\n      }\n    }\n\n    return (\n      <div\n        className=\"node\"\n        style={{\n          backgroundColor: `rgb(${color[0]}, ${color[1]},${color[2]})`,\n          height: height,\n          width: width,\n        }}\n      ></div>\n    );\n  }\n}\n","import React from \"react\";\nimport Header from \"./Header\";\nimport GeneticNode from \"../logic/GeneticNode\";\nimport { SettingsState, PopulationSize, MutationType } from \"./Settings\";\nimport Node from \"./node/Node\";\nimport \"./GeneticVisualizer.css\";\nimport Container from \"react-bootstrap/Container\";\nimport Row from \"react-bootstrap/Row\";\nimport Col from \"react-bootstrap/Col\";\n\ntype VisualizerProps = {\n  settings: SettingsState;\n  switchToSettings: Function;\n};\n\ntype VisualizerState = {\n  grid: GeneticNode[][];\n  generationNumber: number;\n  mutationChance: number;\n};\n\nexport default class GeneticVisualizer extends React.Component<\n  VisualizerProps,\n  VisualizerState\n> {\n  state: VisualizerState = {\n    grid: [],\n    generationNumber: 1,\n    mutationChance: this.props.settings.mutationChance,\n  };\n\n  componentDidMount() {\n    this.setState({\n      grid: this.getInitialGrid(),\n    });\n  }\n\n  nextGeneration = (times = 1) => {\n    let grid = this.state.grid;\n    let flattenedNodes = this.getFlattenedNodes(grid);\n    let generationNumber = this.state.generationNumber;\n    for (let i = 0; i < times; i++) {\n      let matingPool = GeneticNode.getMatingPool(\n        flattenedNodes,\n        this.props.settings.endColor,\n        this.props.settings.matingPoolPercent\n      );\n      let numCrossovers = flattenedNodes.length - matingPool.length;\n      flattenedNodes = this.getNextPopulation(\n        matingPool,\n        numCrossovers,\n        generationNumber\n      );\n      generationNumber++;\n    }\n    grid = this.unFlattenNodes(flattenedNodes);\n    this.setState({\n      grid: grid,\n      generationNumber: this.state.generationNumber + times,\n    });\n  };\n\n  private getNextPopulation(\n    matingPool: GeneticNode[],\n    numCrossovers: number,\n    generationNumber: number\n  ): GeneticNode[] {\n    let nextPopulation = Array.from(matingPool);\n    for (let i = 0; i < numCrossovers; i++) {\n      let parents = this.getParents(matingPool);\n      let offspring = GeneticNode.crossover(parents[0], parents[1]);\n      let mutationChance = 0;\n      switch (this.props.settings.mutationType) {\n        case MutationType.Gradual: {\n          mutationChance = offspring.mutateGradual(\n            this.props.settings.decreaseMutation ? generationNumber : -1,\n            this.props.settings.mutationChance\n          );\n          break;\n        }\n        case MutationType.Invert: {\n          mutationChance = offspring.mutateInvert(\n            this.props.settings.decreaseMutation ? generationNumber : -1,\n            this.props.settings.mutationChance\n          );\n          break;\n        }\n      }\n      this.setState({ mutationChance: mutationChance });\n      nextPopulation.push(offspring);\n    }\n    return nextPopulation;\n  }\n\n  private getParents(matingPool: GeneticNode[]): [GeneticNode, GeneticNode] {\n    let index1 = Math.floor(Math.random() * matingPool.length);\n    let index2 = Math.floor(Math.random() * matingPool.length);\n    while (index2 === index1) {\n      index2 = Math.floor(Math.random() * matingPool.length);\n    }\n    return [matingPool[index1], matingPool[index2]];\n  }\n\n  private getFlattenedNodes(geneticNodes: GeneticNode[][]): GeneticNode[] {\n    let flattenedNodes: GeneticNode[] = [];\n    for (let i = 0; i < geneticNodes.length; i++) {\n      for (let j = 0; j < geneticNodes[i].length; j++) {\n        flattenedNodes.push(geneticNodes[i][j]);\n      }\n    }\n    return flattenedNodes;\n  }\n\n  sortByFitness = () => {\n    let endColor = this.props.settings.endColor;\n    let flattenedNodes = this.getFlattenedNodes(this.state.grid);\n    GeneticNode.sortByFitness(flattenedNodes, endColor);\n    this.setState({\n      grid: this.unFlattenNodes(flattenedNodes),\n    });\n  };\n\n  render() {\n    return (\n      <div>\n        <Header\n          generationNumber={this.state.generationNumber}\n          mutationChance={this.state.mutationChance}\n          nextGeneration={this.nextGeneration}\n          sortByFitness={this.sortByFitness}\n          switchToSettings={this.props.switchToSettings}\n        />\n        <Container fluid=\"sm\">\n          {this.state.grid.map((row, rowIdx) => {\n            return (\n              <Row key={rowIdx}>\n                {row.map((node, nodeIdx) => {\n                  return (\n                    <Col>\n                      <Node\n                        key={`${rowIdx}-${nodeIdx}`}\n                        geneticNode={node}\n                        populationSize={this.props.settings.populationSize}\n                      ></Node>\n                    </Col>\n                  );\n                })}\n              </Row>\n            );\n          })}\n        </Container>\n      </div>\n    );\n  }\n\n  unFlattenNodes(nodes: GeneticNode[]): GeneticNode[][] {\n    let size = this.state.grid.length;\n    let index = 0;\n    let grid = [];\n    for (let i = 0; i < size; i++) {\n      let currentRow = [];\n      for (let j = 0; j < size; j++) {\n        currentRow.push(nodes[index]);\n        index++;\n      }\n      grid.push(currentRow);\n    }\n    return grid;\n  }\n\n  getInitialGrid = () => {\n    let size = 0;\n    switch (this.props.settings.populationSize) {\n      case PopulationSize.Small: {\n        size = 10;\n        break;\n      }\n      case PopulationSize.Medium: {\n        size = 20;\n        break;\n      }\n      case PopulationSize.Large: {\n        size = 36;\n        break;\n      }\n    }\n    const grid = [];\n    for (let row = 0; row < size; row++) {\n      const currentRow = [];\n      for (let col = 0; col < size; col++) {\n        currentRow.push(new GeneticNode());\n      }\n      grid.push(currentRow);\n    }\n    return grid;\n  };\n}\n","import React from \"react\";\nimport Settings, {\n  getDefaultSettings,\n  SettingsState,\n} from \"./components/Settings\";\nimport GeneticVisualizer from \"./components/GeneticVisualizer\";\nimport \"./App.css\";\n\ntype AppState = {\n  isSettings: boolean;\n  settings: SettingsState;\n};\n\nclass App extends React.Component<{}, AppState> {\n  state: AppState = {\n    isSettings: true,\n    settings: getDefaultSettings(),\n  };\n\n  switchToVisualize = (settingsState: SettingsState) => {\n    this.setState({\n      isSettings: false,\n      settings: settingsState,\n    });\n  };\n\n  switchToSettings = () => {\n    this.setState({ isSettings: true });\n  };\n\n  render() {\n    if (this.state.isSettings) {\n      return <Settings switchToVisualize={this.switchToVisualize} />;\n    } else {\n      return (\n        <GeneticVisualizer\n          settings={this.state.settings}\n          switchToSettings={this.switchToSettings}\n        />\n      );\n    }\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}