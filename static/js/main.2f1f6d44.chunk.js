(this["webpackJsonpgenetic-visualizer"]=this["webpackJsonpgenetic-visualizer"]||[]).push([[0],{32:function(e,t,a){e.exports=a(44)},37:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n,r,o=a(0),i=a.n(o),c=a(16),s=a.n(c),l=(a(37),a(38),a(7)),u=a(8),h=a(10),m=a(9),g=a(5),p=a(14),d=a(25);function f(){return{endColor:[0,0,0],populationSize:n.Medium,mutationType:r.Gradual,mutationChance:.3,decreaseMutation:!1,matingPoolPercent:.25}}!function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(n||(n={})),function(e){e[e.Gradual=0]="Gradual",e[e.Invert=1]="Invert"}(r||(r={}));var v=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).state=f(),e.handleVisualize=function(t){e.props.switchToVisualize(e.state)},e.handleMutationTypeChange=function(t){var a=r.Gradual;switch(t.currentTarget.value){case"Gradual":a=r.Gradual;break;case"Invert":a=r.Invert}e.setState({mutationType:a})},e.handlePopulationSizeChange=function(t){var a=n.Medium;switch(t.currentTarget.value){case"Small":a=n.Small;break;case"Medium":a=n.Medium;break;case"Large":a=n.Large}e.setState({populationSize:a})},e.handleColorChange=function(t){e.setState({endColor:e.hexToRgb(t.currentTarget.value)})},e.handleCheckBoxChange=function(t){e.setState({decreaseMutation:t.currentTarget.checked})},e.handleMutationChanceChange=function(t){e.setState({mutationChance:+t.currentTarget.value})},e.handleMatingPoolPercentChange=function(t){e.setState({matingPoolPercent:+t.currentTarget.value})},e}return Object(u.a)(a,[{key:"hexToRgb",value:function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement(d.a,null,i.a.createElement(d.a.Header,{as:"h5"},"Genetic Visualizer"),i.a.createElement(d.a.Body,null,i.a.createElement(g.a,null,i.a.createElement(g.a.Group,{controlId:"formEndColor"},i.a.createElement(g.a.Label,{style:{fontWeight:"bold"}},"The color to converge to:"),i.a.createElement(g.a.Control,{type:"color",onChange:this.handleColorChange})),i.a.createElement(g.a.Group,{controlId:"formPopulationSize"},i.a.createElement(g.a.Label,{style:{fontWeight:"bold"}},"Population Size:"),i.a.createElement(g.a.Control,{as:"select",defaultValue:"Medium",onChange:this.handlePopulationSizeChange},i.a.createElement("option",null,"Small"),i.a.createElement("option",null,"Medium"),i.a.createElement("option",null,"Large"))),i.a.createElement(g.a.Group,{controlId:"formMutationType"},i.a.createElement(g.a.Label,{style:{fontWeight:"bold"}},"Mutation Type:"),i.a.createElement(g.a.Control,{as:"select",defaultValue:"Gradual",onChange:this.handleMutationTypeChange},i.a.createElement("option",null,"Gradual"),i.a.createElement("option",null,"Invert"))),i.a.createElement(g.a.Group,{controlId:"formCheck"},i.a.createElement(g.a.Check,{type:"checkbox",label:"Decrease mutation chance over generations",onChange:this.handleCheckBoxChange,checked:this.state.decreaseMutation})),i.a.createElement(g.a.Group,{controlId:"formMutationRange"},i.a.createElement(g.a.Label,null,i.a.createElement("span",{style:{fontWeight:"bold"}},"Mutation Chance:")," ",this.state.mutationChance),i.a.createElement(g.a.Control,{type:"range",min:"0",max:"1",step:"0.05",value:this.state.mutationChance,onChange:this.handleMutationChanceChange})),i.a.createElement(g.a.Group,{controlId:"formMatingPoolRange"},i.a.createElement(g.a.Label,null,i.a.createElement("span",{style:{fontWeight:"bold"}},"Percentage of population in mating pool:")," ",this.state.matingPoolPercent),i.a.createElement(g.a.Control,{type:"range",min:"0",max:"1",step:"0.05",value:this.state.matingPoolPercent,onChange:this.handleMatingPoolPercentChange})),i.a.createElement(p.a,{variant:"primary",onClick:this.handleVisualize},"Visualize")))))}}]),a}(i.a.Component),C=a(15),y=a(31),b=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return i.a.createElement(C.a,{bg:"light",expand:"lg"},i.a.createElement(C.a.Brand,null,"Genetic Visualizer"),i.a.createElement(C.a.Toggle,{"aria-controls":"basic-navbar-nav"}),i.a.createElement(C.a.Collapse,{id:"basic-navbar-nav"},i.a.createElement(y.a,{className:"mr-auto"},i.a.createElement(C.a.Text,{className:"mr-sm-2"},"Generation Number: ",this.props.generationNumber),i.a.createElement(C.a.Text,{className:"mr-sm-2"},"Mutation Chance: ",this.props.mutationChance)),i.a.createElement(g.a,{inline:!0},i.a.createElement(p.a,{className:"mr-sm-2",onClick:function(t){return e.props.sortByFitness()}},"Sort by fitness"),i.a.createElement(p.a,{className:"mr-sm-2",onClick:function(t){return e.props.nextGeneration()}},"Next Generation"),i.a.createElement(p.a,{className:"mr-sm-2",onClick:function(t){return e.props.nextGeneration(10)}},"Next Generation (x10)"),i.a.createElement(p.a,{className:"mr-sm-2",variant:"dark",onClick:function(t){return e.props.switchToSettings()}},"Reset"))))}}]),a}(i.a.Component),E=function(){function e(){Object(l.a)(this,e),this.colorVector=void 0,this.colorVector=[255,255,255]}return Object(u.a)(e,[{key:"getDistanceFromTarget",value:function(e){for(var t=[0,0,0],a=0;a<3;a++)t[a]=e[a]-this.colorVector[a];return Math.sqrt(t.reduce((function(e,t){return e+Math.pow(t,2)}),0))}},{key:"mutateGradual",value:function(e,t){var a=this;return this.mutate(e,t,(function(e){return e+a.getRandomInt(-50,50)}))}},{key:"mutateInvert",value:function(e,t){return this.mutate(e,t,(function(e){return 255-e}))}},{key:"mutate",value:function(e,t,a){t=this.getMutationChance(t,e);for(var n=0;n<3;n++){Math.random()<=t&&(this.colorVector[n]=a(this.colorVector[n]),this.colorVector[n]>255?this.colorVector[n]=255:this.colorVector[n]<0&&(this.colorVector[n]=0))}return t}},{key:"getRandomInt",value:function(e,t){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}},{key:"getMutationChance",value:function(e,t){return-1!==t?e/t:e}}],[{key:"crossover",value:function(t,a){for(var n=new e,r=0;r<3;r++){var o=Math.random();n.colorVector[r]=t.colorVector[r]*o+a.colorVector[r]*(1-o)}return n}},{key:"getMatingPool",value:function(e,t,a){return this.sortByFitness(e,t),e.slice(0,Math.round(e.length*a))}},{key:"sortByFitness",value:function(e,t){e.sort((function(e,a){return e.getDistanceFromTarget(t)<a.getDistanceFromTarget(t)?-1:1}))}}]),e}(),M=(a(42),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.geneticNode.colorVector,t="50px",a="50px";switch(this.props.populationSize){case n.Small:t="100px",a="100px";break;case n.Medium:t="50px",a="50px";break;case n.Large:t="15px",a="15px"}return i.a.createElement("div",{className:"node",style:{backgroundColor:"rgb(".concat(e[0],", ").concat(e[1],",").concat(e[2],")"),height:t,width:a}})}}]),a}(i.a.Component)),k=a(29),S=a(30),T=a(20),G=function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={grid:[],generationNumber:1,mutationChance:e.props.settings.mutationChance},e.nextGeneration=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=e.state.grid,n=e.getFlattenedNodes(a),r=e.state.generationNumber,o=0;o<t;o++){var i=E.getMatingPool(n,e.props.settings.endColor,e.props.settings.matingPoolPercent),c=n.length-i.length;n=e.getNextPopulation(i,c,r),r++}a=e.unFlattenNodes(n),e.setState({grid:a,generationNumber:e.state.generationNumber+t})},e.sortByFitness=function(){var t=e.props.settings.endColor,a=e.getFlattenedNodes(e.state.grid);E.sortByFitness(a,t),e.setState({grid:e.unFlattenNodes(a)})},e.getInitialGrid=function(){for(var t=e.getGridSize(),a=[],n=0;n<t;n++){for(var r=[],o=0;o<t;o++)r.push(new E);a.push(r)}return a},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.setState({grid:this.getInitialGrid()})}},{key:"getNextPopulation",value:function(e,t,a){for(var n=Array.from(e),r=0;r<t;r++){var o=this.getParents(e),i=E.crossover(o[0],o[1]),c=this.mutateOffspring(i,a);this.setState({mutationChance:c}),n.push(i)}return n}},{key:"mutateOffspring",value:function(e,t){switch(this.props.settings.mutationType){case r.Gradual:return e.mutateGradual(this.props.settings.decreaseMutation?t:-1,this.props.settings.mutationChance);case r.Invert:return e.mutateInvert(this.props.settings.decreaseMutation?t:-1,this.props.settings.mutationChance)}}},{key:"getParents",value:function(e){for(var t=Math.floor(Math.random()*e.length),a=Math.floor(Math.random()*e.length);a===t;)a=Math.floor(Math.random()*e.length);return[e[t],e[a]]}},{key:"getFlattenedNodes",value:function(e){for(var t=[],a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)t.push(e[a][n]);return t}},{key:"unFlattenNodes",value:function(e){for(var t=this.state.grid.length,a=0,n=[],r=0;r<t;r++){for(var o=[],i=0;i<t;i++)o.push(e[a]),a++;n.push(o)}return n}},{key:"getGridSize",value:function(){switch(this.props.settings.populationSize){case n.Small:return 10;case n.Medium:return 20;case n.Large:return 36}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement(b,{generationNumber:this.state.generationNumber,mutationChance:this.state.mutationChance,nextGeneration:this.nextGeneration,sortByFitness:this.sortByFitness,switchToSettings:this.props.switchToSettings}),i.a.createElement(k.a,{fluid:"sm"},this.state.grid.map((function(t,a){return i.a.createElement(S.a,{key:a},t.map((function(t,n){return i.a.createElement(T.a,null,i.a.createElement(M,{key:"".concat(a,"-").concat(n),geneticNode:t,populationSize:e.props.settings.populationSize}))})))}))))}}]),a}(i.a.Component),w=(a(43),function(e){Object(h.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isSettings:!0,settings:f()},e.switchToVisualize=function(t){e.setState({isSettings:!1,settings:t})},e.switchToSettings=function(){e.setState({isSettings:!0})},e}return Object(u.a)(a,[{key:"render",value:function(){return this.state.isSettings?i.a.createElement(v,{switchToVisualize:this.switchToVisualize}):i.a.createElement(G,{settings:this.state.settings,switchToSettings:this.switchToSettings})}}]),a}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.2f1f6d44.chunk.js.map